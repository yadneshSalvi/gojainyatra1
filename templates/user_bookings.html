{% extends 'base.html' %}

{% load static %}
{% load tz %}

{% block stylesheet %}
   <link rel="stylesheet" type="text/css" href="{% static 'layout.css' %}">
{% endblock %}

{% block navbar_add %}
    
    <li class="nav-item active">
        <a class="nav-link" href="{% url 'home' %}">Home</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="{% url 'list_dharamshala' %}">Dharamshalas</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="{% url 'vlogs' %}">Vlogs</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="{% url 'contact_us' %}">Contact Us</a>
    </li>
{% endblock %}

{% block content %}
<div class="container">
    <ol class="breadcrumb my-4">
      <li class="breadcrumb-item"><a href="{% url 'home' %}" style="color:black;">Home</a></li>
      <li class="breadcrumb-item active">My bookings</li>
      
    </ol>
</div>

<div class="container" style="padding-top:10px;">
    {% if messages %}
        {% for message in messages %}
            <div class="alert {% if message.tags %}alert-{{ message.tags }}{% endif %}" role="alert">{{ message }}</div>
        {% endfor %}
    {% endif %}
    <table class="table">
        <thead class="thead-dark">
          <tr>
            <th>Booking for Dharamshala</th>
            <th>Booking Date</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          {% for booking in bookings %}
            <tr>
                <td>
                    {% with hour=booking.booked_at|time:"H"%}
                        {% with min=booking.booked_at|time:"i"%}
                            <a href="{%url 'user_bookings_descp' booking.booked_by booking.booked_at.year booking.booked_at.month booking.booked_at.day hour min%}" 
                            style="color:black;">
                                {{booking.dharamshala.name_with_space}}
                                <small class="text-muted d-block">{{booking.dharamshala.city_or_location}}</small>
                            </a>
                        {% endwith %}
                    {% endwith %}
                </td>
                <td class="align-middle">
                    {% with hour=booking.booked_at|time:"H"%}
                        {% with min=booking.booked_at|time:"i"%}
                            <a href="{%url 'user_bookings_descp' booking.booked_by booking.booked_at.year booking.booked_at.month booking.booked_at.day hour min%}" style="color:black;">
                                {{booking.booked_at}}
                            </a>
                        {% endwith %}
                    {% endwith %}
                </td>
                <td>
                    {% if booking.status == '1' %}
                        <span style="color:red;">Waiting for confirmation</span>
                    {% else %}
                        <span style="color:green;">Confirmed</span>
                    {% endif %}
                </td>
            </tr>
          {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}

